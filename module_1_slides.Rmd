---
title: "Module 1: Dealing with Data"
author: ""
date: "`r Sys.Date()`"
output: 
  xaringan::moon_reader:
    lib_dir: libs
    css: [xaringan-themer.css, other.css]
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

<!-- Make default font bigger -->
<style type="text/css">
.remark-slide-content {
    font-size: 30px;
    
}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo=T, 
  eval = F,
  message = F, 
  warning = F, 
  comment = NA,
  R.options=list(width=120), 
  cache.rebuild=F, 
  cache=T,
  fig.align='center', 
  fig.asp = .7,
  dev = 'svg', 
  dev.args=list(bg = 'transparent')
)

library(tidyverse); library(broom); library(kableExtra); library(visibly)

kable_df <- function(..., digits=3) {
  kable(..., digits=digits) %>% 
    kable_styling(full_width = F)
}

rnd = function(x, digits = 3) arm::fround(x, digits = digits)
```

## Introduction

---
## Objects and Classes

Everything you use in R is an <span class="emph">object</span> of a certain <span class="emph">class</span>

Objects can be anything:
- a single value
- a vector of values
- a data frame/table
- a list of 1000 models

*Anything!*

```{r objects, echo=FALSE}

```

---

## Data Structures

Vectors form the basis of R data structures. Two main types are atomic and lists

```{r vector}
my_vector <- c(1, 2, 3)   # standard vector
```

```{r list}
my_list <- list(a = 1, b = 2)   # a named list
my_list
```

---

## Data frames

Data frames are a special kind of list, and probably the most commonly used for data science purposes.

```{r data_frame, eval=TRUE}
my_data = data.frame(
  id = 1:3,
  name = c('Bob', 'Ace', 'Jenny')
)

my_data
class(my_data)
```


---

## Importing Data

```{r import}
```

---

## Working with Databases

---

## Data Processing 

What is the tidyverse?

The tidyverse consists of a few key packages:

- <span class="pack">ggplot2</span>: data visualization
- <span class="pack">dplyr</span>: data manipulation
- <span class="pack">tidyr</span>: data tidying
- <span class="pack">readr</span>: data import
- <span class="pack">purrr</span>: functional programming
- <span class="pack">tibble</span>: tibbles, a modern re-imagining of data frames

And of course the <span class="pack">tidyverse</span> package itself, which will load all of the above in a way that will avoid naming conflicts.
---

## Selecting Columns

---

## Filtering Rows

---

## Generating new data

---

## Grouping and Summarizing Operations

---

## Merging


Mutating Joins — inner_join(), left_join(), right_join(), full_join()

Filtering Joins — semi_join(), anti_join()

---

## Original Data Frame

```{r origdf, out.width='100%', eval=T, echo=FALSE}
knitr::include_graphics('img/original-dfs.png')
```


---

## Left Join

> All rows from x, and all columns from x and y. Rows in x with no match in y will have NA values in the new columns.

```{r left_join, out.width='75%', eval=T, echo=FALSE}
knitr::include_graphics('img/left-join.gif')
```

---

## Left Join (extra Rows in y)

> … If there are multiple matches between x and y, all combinations of the matches are returned.

```{r left_join_extra, out.width='75%', eval=T, echo=FALSE}
knitr::include_graphics('img/left-join-extra.gif')
```

---

## Right Join

> All rows from y, and all columns from x and y. Rows in y with no match in x will have NA values in the new columns.

```{r right_join, out.width='75%', eval=T, echo=FALSE}
knitr::include_graphics('img/right-join.gif')
```

---

## Full Join

> All rows and all columns from both x and y. Where there are not matching values, returns NA for the one missing.

```{r full_join, out.width='66%', eval=T, echo=FALSE}
knitr::include_graphics('img/full-join.gif')
```

---

## Inner Join

> All rows from x where there are matching values in y, and all columns from x and y.

```{r inner_join, out.width='75%', eval=T, echo=FALSE}
knitr::include_graphics('img/inner-join.gif')
```

---

## Semi Join

> All rows from x where there are matching values in y, keeping just columns from x.

```{r semi_join, out.width='75%', eval=T, echo=FALSE}
knitr::include_graphics('img/semi-join.gif')
```

---

## Anti Join

> All rows from x where there are not matching values in y, keeping just columns from x.

```{r anti_join, out.width='75%', eval=T, echo=FALSE}
knitr::include_graphics('img/anti-join.gif')
```

---


## Joins

Figure credits: https://github.com/gadenbuie/tidyexplain


---
